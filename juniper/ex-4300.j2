system {
    {#hostname {{device|replace("#","")|replace(" ","-")|}}#}
    root-authentication {
        encrypted-password "$6$FOqEb6YS$a3/b1ZqyiZzE0gBQ0jq4.DGdEl6vIlh5rv.qdxQ2LVx8QYrZ6xafHTDIqlBnJLP5p3oOOX9gguUMi3xN5KAU60"; ## SECRET-DATA
    }
    login {
        user admin {
            full-name admin;
            uid 100;
            class super-user;
            authentication {
                encrypted-password "$6$wUcva1Gq$UpRGvfV9DLsQanGuzRFAGieQLKGcYvdH6smEgbuZiVYrzjUeWlytNBYkbZnr9Q4a9Ek5EpA0fD5e/w1S5Ipis/"; ## SECRET-DATA
            }
        }
    }
    services {
        ftp;
        ssh {
            protocol-version v2;
        }
        netconf {
            ssh;
            rfc-compliant;
            yang-compliant;
        }
        dhcp-local-server {
            route-suppression {
                access-internal;
            }
            group Flypack1DHCP {
                {%- set vlans = device.site.region.vlan_groups.first().vlans.all()|list + device.site.vlans.all()|list %}
                {%- for vlan in vlans %}
                    {%- if vlan.vid is defined %}
                        interface irb.{{vlan.vid}} name "{{vlan.name}}"
                    {%- endif %}
                {%- endfor %}
            }
        }
        web-management {
            http;
        }
    }
    auto-snapshot;
    time-zone Europe/London;
    syslog {
        host {{syslog_server}} {
            any info;
            interactive-commands warning;
        }
        file interactive-commands {
            interactive-commands warning;
        }
        file messages {
            any warning;
            authorization warning;
            user warning;
            interactive-commands warning;
        }
        source-address {{device.primary_ip4|ip()}};
    }
    processes {
        dhcp-service {
            traceoptions {
                file dhcp_logfile size 10m;
                level all;
                flag packet;
            }
        }
    }
    ntp {
        server {{sntp_server}};
        server 10.40.40.12;
    }
}
chassis {
    redundancy {
        graceful-switchover;
    }
    aggregated-devices {
        ethernet {
            device-count 21;
        }
    }
    alarm {
        management-ethernet {
            link-down ignore;
        }
    }
}
